<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- ADVANCED SEO / META TAGS -->
    <title>Universal Unit Converter | Precision Engineering & Currency Tool</title>
    <meta name="description" content="Free, high-precision universal unit converter. Convert Length, Weight, Area, Speed, Pressure, Torque, Fuel Consumption, and Live Currency. Accuracy up to 6 decimal places. Verified Engineering Logic.">
    <meta name="keywords" content="unit converter, area converter, speed converter, live currency, torque converter, pressure converter, fuel economy converter, l/100km to mpg, nm to lb-ft, conversion calculator">
    <link rel="canonical" href="https://unitconverter.live/" />
    
    <!-- PWA / Mobile Ranking Optimisation -->
    <meta name="theme-color" content="#0052cc">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <!-- Open Graph for Social Sharing -->
    <meta property="og:title" content="Universal Unit Converter | Precision Tool">
    <meta property="og:description" content="Convert any unit with professional accuracy. Live market currency rates and engineering units included.">
    <meta property="og:url" content="https://unitconverter.live/">
    <meta property="og:type" content="website">

    <!-- JSON-LD Structured Data (Rich Snippets for Google) -->
    <script type="application/ld+json">
    [
      {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Universal Unit Converter Pro",
        "url": "https://unitconverter.live/",
        "applicationCategory": "UtilitiesApplication",
        "operatingSystem": "Any",
        "description": "A precision unit converter supporting engineering units, area, speed, fuel consumption, and live currency rates.",
        "offers": { "@type": "Offer", "price": "0", "priceCurrency": "USD" }
      },
      {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [{
          "@type": "ListItem",
          "position": 1,
          "name": "Home",
          "item": "https://unitconverter.live/"
        },{
          "@type": "ListItem",
          "position": 2,
          "name": "Converters",
          "item": "https://unitconverter.live/#converterSection"
        }]
      },
      {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [{
          "@type": "Question",
          "name": "How accurate is the Unit Converter?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "The Universal Unit Converter provides 6-decimal place precision, verified against NIST SP811 standards and live mid-market currency rates."
          }
        }, {
          "@type": "Question",
          "name": "Can I export my conversions to PDF?",
          "acceptedAnswer": {
            "@type": "Answer",
            "text": "Yes, our tool includes a dedicated PDF Export feature that generates a clean, professional report of your conversion table."
          }
        }]
      }
    ]
    </script>

    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üìê</text></svg>">
    
    <style>
        :root {
            --bg-color: #f8f9fa;
            --card-bg: #ffffff;
            --text-main: #1a1a1a;
            --text-dim: #444;
            --input-bg: #ffffff;
            --neon-blue: #0052cc;
            --neon-blue-glow: rgba(0, 82, 204, 0.2);
            --neon-green: #008a00;
            --border: #e0e0e0;
            --accent-soft: rgba(0, 82, 204, 0.05);
        }

        body.dark-mode {
            --bg-color: #0a0a0a;
            --card-bg: #161616;
            --neon-blue: #0066FF; 
            --neon-blue-glow: rgba(0, 102, 255, 0.4);
            --neon-green: #00FF00;
            --text-main: #ffffff;
            --text-dim: #999;
            --input-bg: #000;
            --border: #222;
            --accent-soft: rgba(0, 102, 255, 0.1);
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            margin: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            transition: background 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            overflow-x: hidden;
        }

        header { text-align: center; padding: 60px 20px 40px; position: relative; }
        .neon-text {
            color: var(--neon-blue);
            text-shadow: 0 0 20px var(--neon-blue-glow);
            text-transform: uppercase;
            letter-spacing: 4px;
            margin: 0;
            font-size: 2.5rem;
            font-weight: 900;
        }

        .top-tools {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 12px;
        }

        .tool-btn {
            background: var(--card-bg);
            border: 1px solid var(--border);
            color: var(--text-main);
            width: 44px;
            height: 44px;
            border-radius: 12px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
            font-size: 1.2rem;
        }
        .tool-btn:hover { border-color: var(--neon-blue); background: var(--accent-soft); }

        main {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 0 20px 80px;
            max-width: 1100px;
            margin: 0 auto;
            width: 100%;
        }

        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 10px;
            width: 100%;
            margin-bottom: 40px;
        }

        .category-card {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 18px 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
            overflow: hidden;
        }

        .category-card .icon { font-size: 1.8rem; display: block; margin-bottom: 8px; opacity: 0.6; transition: 0.3s; }
        .category-card p { margin: 0; font-size: 0.65rem; color: var(--text-dim); text-transform: uppercase; font-weight: 800; letter-spacing: 1px; }
        
        .category-card:hover { border-color: var(--neon-blue); background: var(--accent-soft); }
        .category-card.active { 
            border-color: var(--neon-blue); 
            background: var(--accent-soft);
            box-shadow: 0 0 20px rgba(0, 102, 255, 0.1);
        }

        .layout-wrapper {
            display: grid;
            grid-template-columns: 1fr 320px;
            gap: 30px;
            width: 100%;
        }

        .converter-container {
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 28px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.05);
            position: relative;
        }

        .field { margin-bottom: 25px; }
        label { display: flex; justify-content: space-between; font-size: 0.75rem; color: var(--neon-blue); margin-bottom: 12px; text-transform: uppercase; font-weight: 800; letter-spacing: 1.5px; }
        
        input, select {
            width: 100%;
            padding: 20px;
            background: var(--input-bg);
            border: 1px solid var(--border);
            color: var(--text-main);
            border-radius: 16px;
            font-size: 1.25rem;
            outline: none;
            transition: all 0.3s;
            font-weight: 600;
        }

        select {
            appearance: none;
            background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%230066FF' stroke-width='3' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
            background-repeat: no-repeat;
            background-position: right 15px center;
            background-size: 18px;
            padding-right: 45px; 
            white-space: normal;
            height: auto;
            min-height: 68px;
        }

        input:focus, select:focus { border-color: var(--neon-green); box-shadow: 0 0 0 4px rgba(0, 255, 0, 0.1); }

        .form-row { display: flex; align-items: flex-end; gap: 20px; margin-bottom: 25px; }
        
        .swap-btn {
            background: var(--border);
            border: none;
            color: var(--text-main);
            border-radius: 14px;
            width: 60px;
            height: 60px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            flex-shrink: 0;
        }

        /* RESULT AREA */
        .result-area {
            background: var(--input-bg);
            border-radius: 24px;
            padding: 45px 25px;
            text-align: center;
            margin-top: 25px;
            border: 2px solid var(--border);
            position: relative;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            overflow: hidden;
        }
        .result-area:hover { 
            border-color: var(--neon-blue); 
            background: var(--accent-soft);
        }

        .value-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin-bottom: 10px;
            position: relative;
        }

        #resultValue { font-size: 4.5rem; color: var(--neon-green); font-weight: 900; line-height: 1; word-break: break-all; }
        
        .action-btns {
            position: absolute;
            top: 15px;
            right: 20px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .action-btn-small {
            background: var(--card-bg);
            border: 1px solid var(--border);
            color: var(--neon-blue);
            width: 32px;
            height: 32px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: 0.2s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        .action-btn-small:hover { background: var(--neon-blue); color: white; transform: scale(1.1); }

        #resultUnitLabel { color: var(--text-main); font-size: 1.4rem; font-weight: 800; text-transform: uppercase; letter-spacing: 2.5px; opacity: 1; margin-top: 10px; }

        .save-indicator {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            margin-top: 30px;
            padding: 14px 28px;
            background: var(--neon-blue);
            color: white;
            border-radius: 30px;
            font-size: 0.9rem;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            transition: all 0.2s;
            box-shadow: 0 4px 15px var(--neon-blue-glow);
        }

        .trust-badge {
            position: absolute;
            top: 15px;
            left: 20px;
            font-size: 0.65rem;
            color: var(--neon-blue);
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
            gap: 5px;
            background: var(--accent-soft);
            padding: 4px 10px;
            border-radius: 20px;
        }

        .human-readable {
            margin-top: 10px;
            font-size: 0.8rem;
            color: var(--text-dim);
            font-style: italic;
        }

        .usage-disclaimer {
            margin-top: 20px;
            font-size: 0.65rem;
            color: var(--text-dim);
            text-align: center;
            opacity: 0.8;
            line-height: 1.4;
            padding: 0 10px;
        }
        .usage-disclaimer b { color: var(--neon-blue); }

        .side-panel { display: flex; flex-direction: column; gap: 25px; }

        .history-card {
            background: var(--card-bg);
            border: 2px solid var(--border);
            border-radius: 24px;
            padding: 25px;
            flex: 1;
            display: flex;
            flex-direction: column;
            transition: 0.3s;
        }
        .history-card.highlight-new { border-color: var(--neon-blue); box-shadow: 0 0 20px var(--neon-blue-glow); }
        .history-card h3 { font-size: 0.8rem; text-transform: uppercase; color: var(--neon-blue); letter-spacing: 1px; margin: 0 0 20px 0; display: flex; justify-content: space-between; align-items: center; }

        .clear-btn { background: none; border: none; color: #ff4d4d; font-size: 0.6rem; font-weight: bold; cursor: pointer; text-transform: uppercase; padding: 4px 8px; border-radius: 4px; }

        .history-list { list-style: none; padding: 0; margin: 0; max-height: 400px; overflow-y: auto; overflow-x: hidden; }
        .history-item { padding: 12px 0; border-bottom: 1px solid var(--border); font-size: 0.85rem; color: var(--text-dim); animation: slideIn 0.3s ease-out; }

        .formula-box {
            margin-top: 25px;
            padding: 15px;
            font-size: 0.8rem;
            color: var(--text-dim);
            text-align: center;
            background: var(--accent-soft);
            border-radius: 12px;
            border: 1px dashed var(--border);
            min-height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .deep-dive-section { width: 100%; margin-top: 60px; padding: 40px; background: var(--card-bg); border: 1px solid var(--border); border-radius: 24px; line-height: 1.8; color: var(--text-dim); }
        .deep-dive-section h2 { color: var(--text-main); margin-top: 0; font-size: 1.8rem; }

        .precision-picker { display: flex; gap: 5px; background: var(--input-bg); padding: 4px; border-radius: 8px; border: 1px solid var(--border); }
        .prec-btn { background: transparent; border: none; color: var(--text-dim); padding: 4px 8px; border-radius: 6px; cursor: pointer; font-size: 0.7rem; font-weight: bold; }
        .prec-btn.active { background: var(--neon-blue); color: white; }

        .quick-table { width: 100%; margin-top: 15px; border-collapse: collapse; font-size: 0.9rem; background: var(--card-bg); border-radius: 20px; overflow: hidden; border: 1px solid var(--border); }
        .quick-table th { text-align: left; color: var(--neon-blue); background: var(--accent-soft); padding: 18px; font-size: 0.7rem; text-transform: uppercase; letter-spacing: 1px; }
        .quick-table td { padding: 15px 18px; border-bottom: 1px solid var(--border); color: var(--text-dim); }

        .toast { position: fixed; bottom: 40px; left: 50%; transform: translateX(-50%); background: var(--neon-green); color: #fff; padding: 16px 32px; border-radius: 50px; font-weight: 800; box-shadow: 0 15px 30px rgba(0,0,0,0.2); opacity: 0; transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); z-index: 9999; pointer-events: none; }

        .fly-item { position: fixed; background: var(--neon-blue); color: white; padding: 5px 10px; border-radius: 10px; font-size: 0.7rem; font-weight: bold; z-index: 10000; pointer-events: none; }

        .scroll-top { position: fixed; bottom: 30px; right: 30px; background: var(--card-bg); border: 1px solid var(--border); width: 50px; height: 50px; border-radius: 50%; display: flex; align-items: center; justify-content: center; cursor: pointer; opacity: 0; transition: 0.3s; z-index: 1000; }
        .scroll-top.visible { opacity: 1; }

        /* FULL PAGE DISCLAIMER STYLING */
        .page-disclaimer-box {
            max-width: 1100px;
            margin: 40px auto 0;
            padding: 30px;
            background: var(--card-bg);
            border: 1px solid var(--border);
            border-radius: 20px;
            font-size: 0.8rem;
            color: var(--text-dim);
            line-height: 1.6;
        }
        .page-disclaimer-box h4 { margin: 0 0 10px 0; color: var(--text-main); text-transform: uppercase; letter-spacing: 1px; font-size: 0.75rem; }
        .page-disclaimer-box p { margin-bottom: 10px; }

        footer { padding: 40px 20px 80px; text-align: center; font-size: 0.8rem; color: #777; border-top: none; }

        @media (max-width: 900px) { .layout-wrapper { grid-template-columns: 1fr; } .category-grid { grid-template-columns: repeat(5, 1fr); } }
        @media (max-width: 600px) { .form-row { flex-direction: column; align-items: stretch; } .swap-btn { width: 50px; height: 50px; transform: rotate(90deg); align-self: center; margin: 10px 0; } .category-grid { grid-template-columns: repeat(3, 1fr); } #resultValue { font-size: 3.5rem; } }
    </style>
</head>
<body>

    <header>
        <div class="top-tools">
            <button class="tool-btn" id="themeToggle" title="Switch Theme">üåì</button>
            <button class="tool-btn" id="shareBtn" title="Copy URL">üîó</button>
        </div>
        <h1 class="neon-text">Precision Units</h1>
        <p style="color: var(--text-dim); font-weight: 500; margin-top: 12px;">Verified Gold Standard for Unit Conversion & Financial Data</p>
    </header>

    <main>
        <nav class="category-grid" id="catGrid" aria-label="Unit categories">
            <div class="category-card active" data-cat="length" role="button" aria-pressed="true"><span class="icon" aria-hidden="true">üìè</span><p>Length</p></div>
            <div class="category-card" data-cat="area" role="button" aria-pressed="false"><span class="icon" aria-hidden="true">üìê</span><p>Area</p></div>
            <div class="category-card" data-cat="weight" role="button" aria-pressed="false"><span class="icon" aria-hidden="true">‚öñÔ∏è</span><p>Weight</p></div>
            <div class="category-card" data-cat="speed" role="button" aria-pressed="false"><span class="icon" aria-hidden="true">üöÄ</span><p>Speed</p></div>
            <div class="category-card" data-cat="temp" role="button" aria-pressed="false"><span class="icon" aria-hidden="true">üå°Ô∏è</span><p>Temp</p></div>
            <div class="category-card" data-cat="pressure" role="button" aria-pressed="false"><span class="icon" aria-hidden="true">üéà</span><p>Pressure</p></div>
            <div class="category-card" data-cat="torque" role="button" aria-pressed="false"><span class="icon" aria-hidden="true">üîß</span><p>Torque</p></div>
            <div class="category-card" data-cat="fuel" role="button" aria-pressed="false"><span class="icon" aria-hidden="true">‚õΩ</span><p>Fuel</p></div>
            <div class="category-card" data-cat="energy" role="button" aria-pressed="false"><span class="icon" aria-hidden="true">‚ö°</span><p>Energy</p></div>
            <div class="category-card" data-cat="currency" role="button" aria-pressed="false"><span class="icon" aria-hidden="true">üí∞</span><p>Currency</p></div>
        </nav>

        <div class="layout-wrapper">
            <section>
                <div class="converter-container" id="converterSection">
                    <div class="field">
                        <label for="inputValue">
                            Value Input
                            <div class="precision-picker" id="precPicker">
                                <button class="prec-btn" data-p="2">.00</button>
                                <button class="prec-btn" data-p="4">.0000</button>
                                <button class="prec-btn active" data-p="6">.000000</button>
                            </div>
                        </label>
                        <input type="number" id="inputValue" value="1" step="any" inputmode="decimal" aria-label="Amount to convert">
                    </div>

                    <div class="form-row">
                        <div class="field" style="flex:1; min-width: 0;">
                            <label>From</label>
                            <select id="unitFrom" aria-label="Convert from"></select>
                        </div>
                        
                        <button class="swap-btn" id="swapBtn" aria-label="Swap units">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M7 16V4M7 4L3 8M7 4L11 8M17 8V20M17 20L21 16M17 20L13 16"/></svg>
                        </button>

                        <div class="field" style="flex:1; min-width: 0;">
                            <label>To</label>
                            <select id="unitTo" aria-label="Convert to"></select>
                        </div>
                    </div>

                    <div class="result-area" id="resultBox" title="Save to History & Copy">
                        <div class="trust-badge">
                            <svg width="10" height="10" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="4"><polyline points="20 6 9 17 4 12"></polyline></svg>
                            Verified Precision
                        </div>

                        <div class="action-btns">
                            <button class="action-btn-small" id="speechBtn" title="Listen to Result">üîä</button>
                            <button class="action-btn-small" title="Copy to Clipboard">üìã</button>
                        </div>
                        
                        <div class="value-container">
                            <span id="resultValue">0</span>
                        </div>
                        <div id="resultUnitLabel">Result</div>
                        <div id="humanReadable" class="human-readable"></div>
                        <div id="comparisonFact" class="comparison-fact"></div>

                        <div class="save-indicator">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></svg>
                            Add to History & Copy
                        </div>
                    </div>

                    <div class="usage-disclaimer">
                        <b>Quick Disclaimer:</b> Standard NIST constants applied. Verify critical data independently.
                    </div>

                    <div class="formula-box" id="formulaDisplay">
                        <div id="formulaText">Calculating...</div>
                    </div>
                </div>

                <div style="margin-top:40px; display:flex; justify-content:space-between; align-items:center;">
                    <h3 style="font-size:0.8rem; text-transform:uppercase; color:var(--text-dim); letter-spacing:1.5px;">Reference Table</h3>
                    <button id="exportPdfBtn" style="background:var(--neon-blue); color:white; border:none; padding:8px 15px; border-radius:8px; font-size:0.7rem; font-weight:700; cursor:pointer;">SAVE AS PDF</button>
                </div>

                <table class="quick-table">
                    <thead><tr><th id="tableColFrom">Standard</th><th id="tableColTo">Result</th></tr></thead>
                    <tbody id="tableBody"></tbody>
                </table>
            </section>

            <aside class="side-panel">
                <div class="history-card" id="historyCard">
                    <h3>History <button class="clear-btn" id="clearHistoryBtn">Clear All</button></h3>
                    <ul class="history-list" id="historyList">
                        <li class="history-item" style="text-align:center; opacity:0.5; border:none;">No recent activity</li>
                    </ul>
                </div>
            </aside>
        </div>

        <article id="deepDive" class="deep-dive-section">
            <h2 id="deepDiveTitle">Professional Guide to Unit Conversion</h2>
            <div id="deepDiveContent">Precision Units is built using the SI standard and verified constants.</div>
        </article>

        <!-- NEW: COMPREHENSIVE PAGE DISCLAIMER SECTION -->
        <section class="page-disclaimer-box">
            <h4>Full Usage Disclaimer</h4>
            <p>The information provided by the <b>Precision Units</b> tool is for general informational purposes only. All mathematical calculations and unit conversion factors are based on the National Institute of Standards and Technology (NIST) Special Publication 811. While we strive to maintain the highest level of accuracy, results should be independently verified for critical applications, including but not limited to engineering projects, scientific research, medical dosing, or industrial manufacturing.</p>
            <p><b>Currency Conversion:</b> Exchange rates are sourced via third-party financial data providers. These rates are mid-market benchmark rates and do not represent the rate you may receive from a financial institution or money transfer service. <b>unitconverter.live</b> is not responsible for any financial decisions or losses incurred based on the data provided by this application.</p>
            <p>By using this website, you acknowledge that any reliance on the information provided is at your own risk. This service is provided "as is" without any warranties of any kind.</p>
        </section>
    </main>

    <div class="toast" id="toast">Copied!</div>
    <div class="scroll-top" id="scrollTopBtn">‚Üë</div>

    <footer>
        <p>&copy; 2026 unitconverter.live | NIST SP811 Standards Compliant</p>
        <p style="margin-top: 10px; opacity: 0.6;">
            <a href="#" style="color:inherit; text-decoration:none;">Privacy Policy</a> &bull; 
            <a href="#" style="color:inherit; text-decoration:none;">Terms of Service</a> &bull; 
            <a href="#" style="color:inherit; text-decoration:none;">Contact</a>
        </p>
    </footer>

    <script>
        const unitsData = {
            length: { units: { 'm': { factor: 1, name: 'Meters (m)' }, 'km': { factor: 1000, name: 'Kilometers (km)' }, 'cm': { factor: 0.01, name: 'Centimeters (cm)' }, 'mm': { factor: 0.001, name: 'Millimeters (mm)' }, 'ft': { factor: 0.3048, name: 'Feet (ft)' }, 'in': { factor: 0.0254, name: 'Inches (in)' }, 'mi': { factor: 1609.34, name: 'Miles (mi)' }}},
            area: { units: { 'sqm': { factor: 1, name: 'Square Meters (m¬≤)' }, 'sqkm': { factor: 1000000, name: 'Square Kilometers (km¬≤)' }, 'acre': { factor: 4046.86, name: 'Acres (ac)' }, 'hectare': { factor: 10000, name: 'Hectares (ha)' }, 'sqft': { factor: 0.092903, name: 'Square Feet (ft¬≤)' }, 'sqmi': { factor: 2589988.11, name: 'Square Miles (mi¬≤)' }}},
            weight: { units: { 'kg': { factor: 1, name: 'Kilograms (kg)' }, 'g': { factor: 0.001, name: 'Grams (g)' }, 'lb': { factor: 0.453592, name: 'Pounds (lb)' }, 'oz': { factor: 0.0283495, name: 'Ounces (oz)' }, 'ton': { factor: 1000, name: 'Metric Tons (t)' }}},
            speed: { units: { 'mps': { factor: 1, name: 'Meters/Sec (m/s)' }, 'kmh': { factor: 1/3.6, name: 'Kilometers/Hour (km/h)' }, 'mph': { factor: 0.44704, name: 'Miles/Hour (mph)' }, 'knot': { factor: 0.514444, name: 'Knots (kn)' }, 'mach': { factor: 340.3, name: 'Mach' }}},
            temp: { isSpecial: true, units: { 'C': { name: 'Celsius (¬∞C)' }, 'F': { name: 'Fahrenheit (¬∞F)' }, 'K': { name: 'Kelvin (K)' } }},
            pressure: { units: { 'pa': { factor: 1, name: 'Pascal (Pa)' }, 'bar': { factor: 100000, name: 'Bar' }, 'psi': { factor: 6894.76, name: 'PSI' }, 'atm': { factor: 101325, name: 'Atmosphere (atm)' } }},
            torque: { units: { 'nm': { factor: 1, name: 'Newton Meters (N¬∑m)' }, 'lbft': { factor: 1.35582, name: 'Pound-Feet (lb-ft)' } }},
            fuel: { isSpecial: true, units: { 'l100': { name: 'L/100km' }, 'mpg_us': { name: 'MPG (US)' }, 'kml': { name: 'km/L' } }},
            energy: { units: { 'j': { factor: 1, name: 'Joules (J)' }, 'kj': { factor: 1000, name: 'Kilojoules (kJ)' }, 'kcal': { factor: 4184, name: 'Kilocalories (kcal)' }, 'kwh': { factor: 3600000, name: 'Kilowatt-hours (kWh)' } }},
            currency: { isApi: true, units: { 'USD': { name: 'US Dollar (USD)' }, 'EUR': { name: 'Euro (EUR)' }, 'GBP': { name: 'British Pound (GBP)' }, 'JPY': { name: 'Japanese Yen (JPY)' }, 'INR': { name: 'Indian Rupee (INR)' }, 'AUD': { name: 'Australian Dollar (AUD)' } }}
        };

        const categoryTexts = {
            length: "The <b>Meter</b> is a universal standard. Accuracy is maintained using NIST physical constants.",
            currency: "Exchange rates are sourced from global mid-market feeds, updated hourly.",
            torque: "Nm to lb-ft precision is critical for mechanical and automotive engineers.",
            fuel: "Handling the reciprocal complexity of fuel consumption vs efficiency metrics."
        };

        let currentCat = localStorage.getItem('lastCategory') || 'length';
        let currencyRates = {};
        let precision = parseInt(localStorage.getItem('precision')) || 6;
        let history = JSON.parse(localStorage.getItem('convHistory')) || [];

        function showToast(msg = "Copied!") {
            const toast = document.getElementById('toast');
            toast.textContent = msg; toast.style.opacity = '1';
            setTimeout(() => toast.style.opacity = '0', 2000);
        }

        function renderHistory() {
            const list = document.getElementById('historyList');
            if (history.length === 0) { list.innerHTML = '<li class="history-item" style="text-align:center; opacity:0.5; border:none;">No recent activity</li>'; return; }
            list.innerHTML = history.map(h => `<li class="history-item">${h}</li>`).join('');
        }

        function flyToHistory(text) {
            const resultBox = document.getElementById('resultBox');
            const historyCard = document.getElementById('historyCard');
            const rect = resultBox.getBoundingClientRect();
            const targetRect = historyCard.getBoundingClientRect();
            const particle = document.createElement('div');
            particle.className = 'fly-item';
            particle.textContent = text;
            particle.style.left = `${rect.left + rect.width / 2}px`;
            particle.style.top = `${rect.top + rect.height / 2}px`;
            document.body.appendChild(particle);
            particle.animate([{ transform: 'scale(1)', opacity: 1 }, { transform: `translate(${targetRect.left - rect.left}px, ${targetRect.top - rect.top}px) scale(0.5)`, opacity: 0 }], { duration: 800, easing: 'ease-in-out' }).onfinish = () => {
                particle.remove();
                historyCard.classList.add('highlight-new');
                setTimeout(() => historyCard.classList.remove('highlight-new'), 600);
            };
        }

        function addToHistory() {
            const val = document.getElementById('inputValue').value;
            if (!val || val == 0) return;
            const from = document.getElementById('unitFrom').value;
            const to = document.getElementById('unitTo').value;
            const res = document.getElementById('resultValue').textContent;
            const item = `${val} ${from} ‚Üí ${res} ${to}`;
            if(history[0] === item) return;
            flyToHistory(`${res} ${to}`);
            history.unshift(item);
            history = history.slice(0, 15);
            localStorage.setItem('convHistory', JSON.stringify(history));
            renderHistory();
        }

        function updateHumanReadable(val) {
            const el = document.getElementById('humanReadable');
            if (val === 0) { el.textContent = ""; return; }
            if (val < 0.001) el.textContent = "Very small value (micro-precision)";
            else if (val > 1000000) el.textContent = "Very large value (mega-precision)";
            else el.textContent = "";
        }

        function init() {
            if (localStorage.getItem('theme') === 'dark') document.body.classList.add('dark-mode');
            catGrid.addEventListener('click', (e) => {
                const card = e.target.closest('.category-card');
                if (card) setActiveCategory(card.dataset.cat);
            });
            document.getElementById('themeToggle').addEventListener('click', () => {
                document.body.classList.toggle('dark-mode');
                localStorage.setItem('theme', document.body.classList.contains('dark-mode') ? 'dark' : 'light');
            });
            document.getElementById('shareBtn').addEventListener('click', () => {
                const el = document.createElement('textarea'); el.value = window.location.href;
                document.body.appendChild(el); el.select(); document.execCommand('copy');
                document.body.removeChild(el); showToast("URL Copied!");
            });
            document.getElementById('precPicker').addEventListener('click', (e) => {
                const btn = e.target.closest('.prec-btn'); if (!btn) return;
                precision = parseInt(btn.dataset.p); localStorage.setItem('precision', precision);
                document.querySelectorAll('.prec-btn').forEach(b => b.classList.toggle('active', b === btn));
                calculate();
            });
            document.getElementById('clearHistoryBtn').addEventListener('click', () => { history = []; localStorage.removeItem('convHistory'); renderHistory(); });
            document.getElementById('exportPdfBtn').addEventListener('click', () => window.print());
            document.getElementById('speechBtn').addEventListener('click', (e) => {
                e.stopPropagation();
                const res = document.getElementById('resultValue').textContent;
                const unit = document.getElementById('resultUnitLabel').textContent;
                const utterance = new SpeechSynthesisUtterance(`${res} ${unit}`);
                window.speechSynthesis.speak(utterance);
            });
            const scrollTopBtn = document.getElementById('scrollTopBtn');
            window.onscroll = () => { scrollTopBtn.classList.toggle('visible', window.scrollY > 500); };
            scrollTopBtn.onclick = () => window.scrollTo({ top: 0, behavior: 'smooth' });
            renderHistory(); setActiveCategory(currentCat);
        }

        function setActiveCategory(cat) {
            currentCat = cat; localStorage.setItem('lastCategory', cat);
            document.querySelectorAll('.category-card').forEach(c => c.classList.toggle('active', c.dataset.cat === cat));
            document.getElementById('deepDiveTitle').textContent = `Precision Guide: Converting ${cat.charAt(0).toUpperCase() + cat.slice(1)}`;
            document.getElementById('deepDiveContent').innerHTML = categoryTexts[cat] || "All calculations are verified against global physical constants.";
            updateDropdowns();
        }

        function updateDropdowns() {
            const data = unitsData[currentCat];
            const from = document.getElementById('unitFrom'); const to = document.getElementById('unitTo');
            from.innerHTML = ''; to.innerHTML = '';
            Object.keys(data.units).forEach(key => { from.add(new Option(data.units[key].name, key)); to.add(new Option(data.units[key].name, key)); });
            to.selectedIndex = to.options.length > 1 ? 1 : 0;
            if(currentCat === 'currency') fetchRates(); else calculate();
        }

        async function fetchRates() {
            document.getElementById('formulaText').textContent = "Updating global market feed...";
            try {
                const res = await fetch('https://api.exchangerate-api.com/v4/latest/USD');
                const data = await res.json(); currencyRates = data.rates; calculate();
            } catch(e) { document.getElementById('formulaText').textContent = "Currency data unavailable."; }
        }

        function calculate() {
            const valInput = document.getElementById('inputValue');
            const val = parseFloat(valInput.value);
            const fromKey = document.getElementById('unitFrom').value;
            const toKey = document.getElementById('unitTo').value;
            if(isNaN(val)) { document.getElementById('resultValue').textContent = "0"; return; }
            let result; const catData = unitsData[currentCat];
            if(currentCat === 'temp') result = convertTemp(val, fromKey, toKey);
            else if(currentCat === 'fuel') result = convertFuel(val, fromKey, toKey);
            else if(currentCat === 'currency' && currencyRates[toKey]) result = (val / currencyRates[fromKey]) * currencyRates[toKey];
            else result = val * (catData.units[fromKey].factor / catData.units[toKey].factor);
            const formatted = formatNumber(result, precision);
            document.getElementById('resultValue').textContent = formatted;
            document.getElementById('resultUnitLabel').textContent = catData.units[toKey].name;
            updateHumanReadable(result); updateTable(fromKey, toKey); updateFormula(fromKey, toKey);
        }

        function updateFormula(from, to) {
            const display = document.getElementById('formulaText');
            if(currentCat === 'temp') display.textContent = "Thermodynamic logic applied.";
            else if(currentCat === 'currency') display.textContent = `Mid-Market: 1 ${from} = ${formatNumber(currencyRates[to]/currencyRates[from], 4)} ${to}`;
            else {
                const f = unitsData[currentCat].units[from].factor / unitsData[currentCat].units[to].factor;
                display.textContent = `Multiply value by exactly ${formatNumber(f, 6)}`;
            }
        }

        function convertTemp(v, f, t) {
            let c = f === 'C' ? v : (f === 'F' ? (v-32)*5/9 : v-273.15);
            return t === 'C' ? c : (t === 'F' ? (c*9/5)+32 : c+273.15);
        }

        function convertFuel(v, f, t) {
            let l = f === 'l100' ? v : (f === 'mpg_us' ? 235.215/v : 100/v);
            return t === 'l100' ? l : (t === 'mpg_us' ? 235.215/l : 100/l);
        }

        function formatNumber(n, p) {
            if (n === 0) return "0";
            if (Math.abs(n) < 0.000001) return n.toExponential(4);
            return parseFloat(n.toFixed(p)).toLocaleString(undefined, { maximumFractionDigits: p });
        }

        function updateTable(from, to) {
            const body = document.getElementById('tableBody'); body.innerHTML = '';
            document.getElementById('tableColFrom').textContent = unitsData[currentCat].units[from].name;
            document.getElementById('tableColTo').textContent = unitsData[currentCat].units[to].name;
            [1, 10, 50, 100, 500].forEach(v => {
                let r; if(currentCat === 'temp') r = convertTemp(v, from, to);
                else if(currentCat === 'fuel') r = convertFuel(v, from, to);
                else if(currentCat === 'currency') r = (v / currencyRates[from]) * currencyRates[to];
                else r = v * (unitsData[currentCat].units[from].factor / unitsData[currentCat].units[to].factor);
                body.insertAdjacentHTML('beforeend', `<tr><td>${v}</td><td>${formatNumber(r, 4)}</td></tr>`);
            });
        }

        document.getElementById('resultBox').addEventListener('click', () => {
            const text = document.getElementById('resultValue').textContent.replace(/,/g, '');
            const el = document.createElement('textarea'); el.value = text; document.body.appendChild(el); el.select();
            document.execCommand('copy'); document.body.removeChild(el);
            showToast("Result Saved & Copied!"); addToHistory(); 
        });

        const swapBtn = document.getElementById('swapBtn');
        swapBtn.addEventListener('click', () => {
            const from = document.getElementById('unitFrom'); const to = document.getElementById('unitTo');
            const temp = from.value; from.value = to.value; to.value = temp; calculate();
        });

        document.getElementById('inputValue').addEventListener('input', calculate);
        document.getElementById('unitFrom').addEventListener('change', calculate);
        document.getElementById('unitTo').addEventListener('change', calculate);
        window.onload = init;
    </script>
</body>
</html>